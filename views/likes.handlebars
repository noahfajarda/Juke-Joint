<button id="go-back-home">Homepage</button>
{{>sidebar}}

<h1>Your Likes:</h1>

<iframe
    id="player"
    src="https://open.spotify.com/embed/track/{{trackId}}?utm_source=generator"
    width="100%"
    height="380"
    frameborder="0"
    allowfullscreen=""
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
    loading="lazy"
></iframe>

<div style="display: flex; flex-direction: row;">
{{#each filteredLikesData}}
    <a
        {{!-- href="/track/{{trackName}} {{trackArtist}}" --}}
        style="display: flex; flex-direction: column;"
    >
        <img id="{{trackId}}"
            src="{{trackArt}}"
            height="200px"
            width="200px"
            alt="{{trackName}}"
            class="rounded-circle"
        />

        {{trackName}}<br />{{trackArtist}}
    </a>
        <h1 id="track-id" style="display:none">{{trackId}}</h1>
    <br />
{{/each}}
</div>


<script>
    const playerEl = document.querySelector('#player');
    const trackIdEl =document.querySelector('#track-id');
    playerEl.style="border-radius: 50px";
    
    document.addEventListener("click", (e) => {
        const target = e.target;
        if (target.id) {
            playerEl.src=`https://open.spotify.com/embed/track/${target.id}?utm_source=generator`;
        }
    })
    // then possibly do a fetch for /api/lyrics/ to get lyrics an populate in a lyrics container.
    // fetch is found in 'lyricRoutes'.
</script>

<script src="/js/back-to-home.js"></script>